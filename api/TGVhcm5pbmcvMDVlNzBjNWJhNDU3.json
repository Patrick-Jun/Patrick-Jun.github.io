{"title":"Laravel常用命令","date":"2020-04-07T06:28:19.000Z","date_formatted":{"ll":"Apr 7, 2020","L":"04/07/2020","MM-DD":"04-07"},"link":"Learning/05e70c5ba457","tags":["Laravel","PHP"],"categories":["Learning"],"updated":"2021-02-27T13:50:22.986Z","content":"<h2 id=\"常用命令\">常用命令<a title=\"#常用命令\" href=\"#常用命令\"></a></h2>\n<p>这些都是我在做毕业设计中，常用的命令，久了不用就忘，恼火<br>\n我是一个小小的前端，这些个东西就不想记了，写下来，忘了就来复制粘贴</p>\n<ul>\n<li>安装依赖：<code>composer install</code></li>\n<li>生成密钥：<code>php artisan key:generate</code></li>\n<li>启动本地服务：<code>php artisan serve</code></li>\n<li>创建\n<ul>\n<li>创建数据表：<code>php artisan make:migration r_users --create=r_users</code>   -m可以一并创建模型</li>\n<li>创建模型：<code>php artisan make:model RUsers</code></li>\n<li>创建控制器：<code>php artisan make:controller RUsersController</code></li>\n<li>创建中间件：<code>php artisan make:middleware filterTime</code></li>\n</ul>\n</li>\n<li>生成数据表：<code>php artisan migrate</code></li>\n<li>部署启动：<code>php artisan up</code></li>\n</ul>\n<p><strong>备注：</strong><br>\nlaravel中的数据表都使用复数形式（users）<br>\n默认CRUD检索id字段为<code>id</code>，因此尽量不自定义id字段</p>\n<h2 id=\"数据表范例\">数据表范例<a title=\"#数据表范例\" href=\"#数据表范例\"></a></h2>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">up</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Schema::create(<span class=\"string\">&#x27;r_xxs&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">Blueprint <span class=\"variable\">$table</span></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$table</span>-&gt;increments(<span class=\"string\">&#x27;id&#x27;</span>);</span><br><span class=\"line\">        <span class=\"variable\">$table</span>-&gt;integer(<span class=\"string\">&#x27;calorie&#x27;</span>, <span class=\"literal\">false</span>, <span class=\"literal\">false</span>)-&gt;nullable()-&gt;comment(<span class=\"string\">&#x27;卡路里&#x27;</span>);</span><br><span class=\"line\">        <span class=\"variable\">$table</span>-&gt;bigInteger(<span class=\"string\">&#x27;rid&#x27;</span>)-&gt;foreign(<span class=\"string\">&#x27;rid&#x27;</span>)-&gt;references(<span class=\"string\">&#x27;rid&#x27;</span>)-&gt;on(<span class=\"string\">&#x27;r_users&#x27;</span>);</span><br><span class=\"line\">        <span class=\"variable\">$table</span>-&gt;tinyInteger(<span class=\"string\">&#x27;sex&#x27;</span>)-&gt;nullable()-&gt;comment(<span class=\"string\">&#x27;性别:0位置1男2女&#x27;</span>);</span><br><span class=\"line\">        <span class=\"variable\">$table</span>-&gt;string(<span class=\"string\">&#x27;openid&#x27;</span>, <span class=\"number\">50</span>)-&gt;unique()-&gt;comment(<span class=\"string\">&#x27;openid&#x27;</span>);</span><br><span class=\"line\">        <span class=\"variable\">$table</span>-&gt;timestamp(<span class=\"string\">&#x27;time_start&#x27;</span>)-&gt;nullable()-&gt;comment(<span class=\"string\">&#x27;开始时间&#x27;</span>); </span><br><span class=\"line\">        <span class=\"variable\">$table</span>-&gt;timestamps(); <span class=\"comment\">//自动添加created_at和updated_at字段</span></span><br><span class=\"line\">        <span class=\"comment\">// $table-&gt;primary([&#x27;rid&#x27;]);</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"中间件范例\">中间件范例<a title=\"#中间件范例\" href=\"#中间件范例\"></a></h2>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"><span class=\"variable\">$request</span>, <span class=\"built_in\">Closure</span> <span class=\"variable\">$next</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;   </span><br><span class=\"line\">    <span class=\"comment\">// 过滤掉时间</span></span><br><span class=\"line\">    <span class=\"variable\">$request</span>-&gt;offsetUnset(<span class=\"string\">&#x27;created_at&#x27;</span>);</span><br><span class=\"line\">    <span class=\"variable\">$request</span>-&gt;offsetUnset(<span class=\"string\">&#x27;updated_at&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$next</span>(<span class=\"variable\">$request</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Kernel.php中注册</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"variable\">$routeMiddleware</span> = [</span><br><span class=\"line\">    <span class=\"string\">&#x27;auth&#x27;</span> =&gt; \\App\\Http\\Middleware\\Authenticate::class,</span><br><span class=\"line\">    <span class=\"string\">&#x27;auth.basic&#x27;</span> =&gt; \\Illuminate\\Auth\\Middleware\\AuthenticateWithBasicAuth::class,</span><br><span class=\"line\">    <span class=\"string\">&#x27;bindings&#x27;</span> =&gt; \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class,</span><br><span class=\"line\">    <span class=\"string\">&#x27;cache.headers&#x27;</span> =&gt; \\Illuminate\\Http\\Middleware\\SetCacheHeaders::class,</span><br><span class=\"line\">    <span class=\"string\">&#x27;can&#x27;</span> =&gt; \\Illuminate\\Auth\\Middleware\\Authorize::class,</span><br><span class=\"line\">    <span class=\"string\">&#x27;guest&#x27;</span> =&gt; \\App\\Http\\Middleware\\RedirectIfAuthenticated::class,</span><br><span class=\"line\">    <span class=\"string\">&#x27;signed&#x27;</span> =&gt; \\Illuminate\\Routing\\Middleware\\ValidateSignature::class,</span><br><span class=\"line\">    <span class=\"string\">&#x27;throttle&#x27;</span> =&gt; \\Illuminate\\Routing\\Middleware\\ThrottleRequests::class,</span><br><span class=\"line\">    <span class=\"string\">&#x27;verified&#x27;</span> =&gt; \\Illuminate\\Auth\\Middleware\\EnsureEmailIsVerified::class,</span><br><span class=\"line\">    <span class=\"comment\">// 自定义中间件</span></span><br><span class=\"line\">    <span class=\"string\">&#x27;filterTime&#x27;</span> =&gt; \\App\\Http\\Middleware\\filterTime::class</span><br><span class=\"line\">];</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//路由中使用</span></span><br><span class=\"line\">Route::prefix(<span class=\"string\">&#x27;user&#x27;</span>)-&gt;group(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\tRoute::post(<span class=\"string\">&#x27;/doUpdate&#x27;</span>, <span class=\"string\">&#x27;RUsersController@doUpdate&#x27;</span>)-&gt;middleware(<span class=\"string\">&#x27;filterTime&#x27;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n","prev":{"title":"微信小程序-页面跳转传值","link":"Learning/31d6d2ad70ad"},"next":{"title":"给网络171班班会就业方面的分享","link":"Life/901a69042e71"},"plink":"https://www.zzboy.cn/Learning/05e70c5ba457/","toc":[{"id":"常用命令","title":"常用命令","index":"1"},{"id":"数据表范例","title":"数据表范例","index":"2"},{"id":"中间件范例","title":"中间件范例","index":"3"}],"reward":true,"copyright":{"author":"Patrick Jun","link":"<a href=\"https://www.zzboy.cn/Learning/05e70c5ba457/\" title=\"Laravel常用命令\">https://www.zzboy.cn/Learning/05e70c5ba457/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"April 7, 2020"}}